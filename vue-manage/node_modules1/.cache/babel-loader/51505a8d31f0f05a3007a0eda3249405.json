{"ast":null,"code":"import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful';\nimport requestAnimationFrame from './requestAnimationFrame';\nimport Animator from './Animator';\n\nvar Animation = function (_super) {\n  __extends(Animation, _super);\n\n  function Animation(opts) {\n    var _this = _super.call(this) || this;\n\n    _this._running = false;\n    _this._time = 0;\n    _this._pausedTime = 0;\n    _this._pauseStart = 0;\n    _this._paused = false;\n    opts = opts || {};\n    _this.stage = opts.stage || {};\n\n    _this.onframe = opts.onframe || function () {};\n\n    return _this;\n  }\n\n  Animation.prototype.addClip = function (clip) {\n    if (clip.animation) {\n      this.removeClip(clip);\n    }\n\n    if (!this._clipsHead) {\n      this._clipsHead = this._clipsTail = clip;\n    } else {\n      this._clipsTail.next = clip;\n      clip.prev = this._clipsTail;\n      clip.next = null;\n      this._clipsTail = clip;\n    }\n\n    clip.animation = this;\n  };\n\n  Animation.prototype.addAnimator = function (animator) {\n    animator.animation = this;\n    var clip = animator.getClip();\n\n    if (clip) {\n      this.addClip(clip);\n    }\n  };\n\n  Animation.prototype.removeClip = function (clip) {\n    if (!clip.animation) {\n      return;\n    }\n\n    var prev = clip.prev;\n    var next = clip.next;\n\n    if (prev) {\n      prev.next = next;\n    } else {\n      this._clipsHead = next;\n    }\n\n    if (next) {\n      next.prev = prev;\n    } else {\n      this._clipsTail = prev;\n    }\n\n    clip.next = clip.prev = clip.animation = null;\n  };\n\n  Animation.prototype.removeAnimator = function (animator) {\n    var clip = animator.getClip();\n\n    if (clip) {\n      this.removeClip(clip);\n    }\n\n    animator.animation = null;\n  };\n\n  Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n    var time = new Date().getTime() - this._pausedTime;\n\n    var delta = time - this._time;\n    var clip = this._clipsHead;\n\n    while (clip) {\n      var nextClip = clip.next;\n      var finished = clip.step(time, delta);\n\n      if (finished) {\n        clip.ondestroy && clip.ondestroy();\n        this.removeClip(clip);\n        clip = nextClip;\n      } else {\n        clip = nextClip;\n      }\n    }\n\n    this._time = time;\n\n    if (!notTriggerFrameAndStageUpdate) {\n      this.onframe(delta);\n      this.trigger('frame', delta);\n      this.stage.update && this.stage.update();\n    }\n  };\n\n  Animation.prototype._startLoop = function () {\n    var self = this;\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        requestAnimationFrame(step);\n        !self._paused && self.update();\n      }\n    }\n\n    requestAnimationFrame(step);\n  };\n\n  Animation.prototype.start = function () {\n    if (this._running) {\n      return;\n    }\n\n    this._time = new Date().getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  };\n\n  Animation.prototype.stop = function () {\n    this._running = false;\n  };\n\n  Animation.prototype.pause = function () {\n    if (!this._paused) {\n      this._pauseStart = new Date().getTime();\n      this._paused = true;\n    }\n  };\n\n  Animation.prototype.resume = function () {\n    if (this._paused) {\n      this._pausedTime += new Date().getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  };\n\n  Animation.prototype.clear = function () {\n    var clip = this._clipsHead;\n\n    while (clip) {\n      var nextClip = clip.next;\n      clip.prev = clip.next = clip.animation = null;\n      clip = nextClip;\n    }\n\n    this._clipsHead = this._clipsTail = null;\n  };\n\n  Animation.prototype.isFinished = function () {\n    return this._clipsHead == null;\n  };\n\n  Animation.prototype.animate = function (target, options) {\n    options = options || {};\n    this.start();\n    var animator = new Animator(target, options.loop);\n    this.addAnimator(animator);\n    return animator;\n  };\n\n  return Animation;\n}(Eventful);\n\nexport default Animation;","map":{"version":3,"names":["__extends","Eventful","requestAnimationFrame","Animator","Animation","_super","opts","_this","call","_running","_time","_pausedTime","_pauseStart","_paused","stage","onframe","prototype","addClip","clip","animation","removeClip","_clipsHead","_clipsTail","next","prev","addAnimator","animator","getClip","removeAnimator","update","notTriggerFrameAndStageUpdate","time","Date","getTime","delta","nextClip","finished","step","ondestroy","trigger","_startLoop","self","start","stop","pause","resume","clear","isFinished","animate","target","options","loop"],"sources":["E:/school/qianduan/web/vue-manage/node_modules/zrender/lib/animation/Animation.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful';\nimport requestAnimationFrame from './requestAnimationFrame';\nimport Animator from './Animator';\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        _this.onframe = opts.onframe || function () { };\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._clipsHead) {\n            this._clipsHead = this._clipsTail = clip;\n        }\n        else {\n            this._clipsTail.next = clip;\n            clip.prev = this._clipsTail;\n            clip.next = null;\n            this._clipsTail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._clipsHead = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._clipsTail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = new Date().getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._clipsHead;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy && clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.onframe(delta);\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = new Date().getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = new Date().getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += (new Date().getTime()) - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._clipsHead;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._clipsHead = this._clipsTail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._clipsHead == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\n\nfunction isLinearGradient(value) {\n  return value.type === 'linear';\n}\n\nfunction isRadialGradient(value) {\n  return value.type === 'radial';\n}\n\nfunction isGradient(value) {\n  return value && (value.type === 'linear' || value.type === 'radial');\n}\n\nvar GradientManager = function (_super) {\n  __extends(GradientManager, _super);\n\n  function GradientManager(zrId, svgRoot) {\n    return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n  }\n\n  GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n    if (displayable && displayable.style) {\n      var that_1 = this;\n      zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n        var value = displayable.style[fillOrStroke];\n\n        if (isGradient(value)) {\n          var gradient = value;\n          var defs = that_1.getDefs(true);\n          var dom = void 0;\n\n          if (gradient.__dom) {\n            dom = gradient.__dom;\n\n            if (!defs.contains(gradient.__dom)) {\n              that_1.addDom(dom);\n            }\n          } else {\n            dom = that_1.add(gradient);\n          }\n\n          that_1.markUsed(displayable);\n          var id = dom.getAttribute('id');\n          svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n        }\n      });\n    }\n  };\n\n  GradientManager.prototype.add = function (gradient) {\n    var dom;\n\n    if (isLinearGradient(gradient)) {\n      dom = this.createElement('linearGradient');\n    } else if (isRadialGradient(gradient)) {\n      dom = this.createElement('radialGradient');\n    } else {\n      zrUtil.logError('Illegal gradient type.');\n      return null;\n    }\n\n    gradient.id = gradient.id || this.nextId++;\n    dom.setAttribute('id', 'zr' + this._zrId + '-gradient-' + gradient.id);\n    this.updateDom(gradient, dom);\n    this.addDom(dom);\n    return dom;\n  };\n\n  GradientManager.prototype.update = function (gradient) {\n    if (!isGradient(gradient)) {\n      return;\n    }\n\n    var that = this;\n    this.doUpdate(gradient, function () {\n      var dom = gradient.__dom;\n\n      if (!dom) {\n        return;\n      }\n\n      var tagName = dom.tagName;\n      var type = gradient.type;\n\n      if (type === 'linear' && tagName === 'linearGradient' || type === 'radial' && tagName === 'radialGradient') {\n        that.updateDom(gradient, gradient.__dom);\n      } else {\n        that.removeDom(gradient);\n        that.add(gradient);\n      }\n    });\n  };\n\n  GradientManager.prototype.updateDom = function (gradient, dom) {\n    if (isLinearGradient(gradient)) {\n      dom.setAttribute('x1', gradient.x + '');\n      dom.setAttribute('y1', gradient.y + '');\n      dom.setAttribute('x2', gradient.x2 + '');\n      dom.setAttribute('y2', gradient.y2 + '');\n    } else if (isRadialGradient(gradient)) {\n      dom.setAttribute('cx', gradient.x + '');\n      dom.setAttribute('cy', gradient.y + '');\n      dom.setAttribute('r', gradient.r + '');\n    } else {\n      zrUtil.logError('Illegal gradient type.');\n      return;\n    }\n\n    if (gradient.global) {\n      dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n    } else {\n      dom.setAttribute('gradientUnits', 'objectBoundingBox');\n    }\n\n    dom.innerHTML = '';\n    var colors = gradient.colorStops;\n\n    for (var i = 0, len = colors.length; i < len; ++i) {\n      var stop_1 = this.createElement('stop');\n      stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n      var color = colors[i].color;\n\n      if (color.indexOf('rgba') > -1) {\n        var opacity = colorTool.parse(color)[3];\n        var hex = colorTool.toHex(color);\n        stop_1.setAttribute('stop-color', '#' + hex);\n        stop_1.setAttribute('stop-opacity', opacity + '');\n      } else {\n        stop_1.setAttribute('stop-color', colors[i].color);\n      }\n\n      dom.appendChild(stop_1);\n    }\n\n    gradient.__dom = dom;\n  };\n\n  GradientManager.prototype.markUsed = function (displayable) {\n    if (displayable.style) {\n      var gradient = displayable.style.fill;\n\n      if (gradient && gradient.__dom) {\n        _super.prototype.markDomUsed.call(this, gradient.__dom);\n      }\n\n      gradient = displayable.style.stroke;\n\n      if (gradient && gradient.__dom) {\n        _super.prototype.markDomUsed.call(this, gradient.__dom);\n      }\n    }\n  };\n\n  return GradientManager;\n}(Definable);\n\nexport default GradientManager;","map":{"version":3,"names":["__extends","Definable","zrUtil","colorTool","isLinearGradient","value","type","isRadialGradient","isGradient","GradientManager","_super","zrId","svgRoot","call","prototype","addWithoutUpdate","svgElement","displayable","style","that_1","each","fillOrStroke","gradient","defs","getDefs","dom","__dom","contains","addDom","add","markUsed","id","getAttribute","setAttribute","createElement","logError","nextId","_zrId","updateDom","update","that","doUpdate","tagName","removeDom","x","y","x2","y2","r","global","innerHTML","colors","colorStops","i","len","length","stop_1","offset","color","indexOf","opacity","parse","hex","toHex","appendChild","fill","markDomUsed","stroke"],"sources":["E:/school/qianduan/web/vue-manage/node_modules/zrender/lib/svg/helper/GradientManager.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\nfunction isLinearGradient(value) {\n    return value.type === 'linear';\n}\nfunction isRadialGradient(value) {\n    return value.type === 'radial';\n}\nfunction isGradient(value) {\n    return value && (value.type === 'linear'\n        || value.type === 'radial');\n}\nvar GradientManager = (function (_super) {\n    __extends(GradientManager, _super);\n    function GradientManager(zrId, svgRoot) {\n        return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n    }\n    GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n        if (displayable && displayable.style) {\n            var that_1 = this;\n            zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n                var value = displayable.style[fillOrStroke];\n                if (isGradient(value)) {\n                    var gradient = value;\n                    var defs = that_1.getDefs(true);\n                    var dom = void 0;\n                    if (gradient.__dom) {\n                        dom = gradient.__dom;\n                        if (!defs.contains(gradient.__dom)) {\n                            that_1.addDom(dom);\n                        }\n                    }\n                    else {\n                        dom = that_1.add(gradient);\n                    }\n                    that_1.markUsed(displayable);\n                    var id = dom.getAttribute('id');\n                    svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n                }\n            });\n        }\n    };\n    GradientManager.prototype.add = function (gradient) {\n        var dom;\n        if (isLinearGradient(gradient)) {\n            dom = this.createElement('linearGradient');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom = this.createElement('radialGradient');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return null;\n        }\n        gradient.id = gradient.id || this.nextId++;\n        dom.setAttribute('id', 'zr' + this._zrId\n            + '-gradient-' + gradient.id);\n        this.updateDom(gradient, dom);\n        this.addDom(dom);\n        return dom;\n    };\n    GradientManager.prototype.update = function (gradient) {\n        if (!isGradient(gradient)) {\n            return;\n        }\n        var that = this;\n        this.doUpdate(gradient, function () {\n            var dom = gradient.__dom;\n            if (!dom) {\n                return;\n            }\n            var tagName = dom.tagName;\n            var type = gradient.type;\n            if (type === 'linear' && tagName === 'linearGradient'\n                || type === 'radial' && tagName === 'radialGradient') {\n                that.updateDom(gradient, gradient.__dom);\n            }\n            else {\n                that.removeDom(gradient);\n                that.add(gradient);\n            }\n        });\n    };\n    GradientManager.prototype.updateDom = function (gradient, dom) {\n        if (isLinearGradient(gradient)) {\n            dom.setAttribute('x1', gradient.x + '');\n            dom.setAttribute('y1', gradient.y + '');\n            dom.setAttribute('x2', gradient.x2 + '');\n            dom.setAttribute('y2', gradient.y2 + '');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom.setAttribute('cx', gradient.x + '');\n            dom.setAttribute('cy', gradient.y + '');\n            dom.setAttribute('r', gradient.r + '');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return;\n        }\n        if (gradient.global) {\n            dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n        }\n        else {\n            dom.setAttribute('gradientUnits', 'objectBoundingBox');\n        }\n        dom.innerHTML = '';\n        var colors = gradient.colorStops;\n        for (var i = 0, len = colors.length; i < len; ++i) {\n            var stop_1 = this.createElement('stop');\n            stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n            var color = colors[i].color;\n            if (color.indexOf('rgba') > -1) {\n                var opacity = colorTool.parse(color)[3];\n                var hex = colorTool.toHex(color);\n                stop_1.setAttribute('stop-color', '#' + hex);\n                stop_1.setAttribute('stop-opacity', opacity + '');\n            }\n            else {\n                stop_1.setAttribute('stop-color', colors[i].color);\n            }\n            dom.appendChild(stop_1);\n        }\n        gradient.__dom = dom;\n    };\n    GradientManager.prototype.markUsed = function (displayable) {\n        if (displayable.style) {\n            var gradient = displayable.style.fill;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n            gradient = displayable.style.stroke;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n        }\n    };\n    return GradientManager;\n}(Definable));\nexport default GradientManager;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}